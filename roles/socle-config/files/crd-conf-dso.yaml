apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: dso-socle-configs.cloud-pi-native.fr
spec:
  conversion:
    strategy: None
  group: cloud-pi-native.fr
  names:
    kind: DsoSocleConfig
    listKind: DsoSocleConfigList
    plural: dso-socle-configs
    shortNames:
      - dsc
    singular: dso-socle-config
  scope: Cluster
  versions:
    - name: v1alpha
      schema:
        openAPIV3Schema:
          properties:
            spec:
              properties:
                additionalsCA:
                  description: Additional CAs to inject into tools; the resources should be available in all namespaces.
                  items:
                    properties:
                      key:
                        description: Optional CA Resource key. If not set, all keys will be imported.
                        type: string
                      kind:
                        default: ConfigMap
                        description: CA Resource kind. Only ConfigMap and Secret are supported.
                        enum:
                          - ConfigMap
                          - Secret
                        type: string
                      name:
                        default: kube-root-ca.crt
                        description: CA Resource name.
                        type: string
                    required:
                      - kind
                      - name
                    type: object
                  type: array
                exposedCA:
                  description: Private CA cert needed to validate HTTPS traffic between tools.
                  type: object
                  required:
                    - type
                  properties:
                    configmap:
                      description: The configmap with private CA.
                      type: object
                      properties:
                        namespace:
                          description: The configmap namespace.
                          type: string
                        name:
                          description: The configmap name.
                          type: string
                        key:
                          description: The configmap key providing the Private CA cert.
                          type: string
                      required:
                        - namespace
                        - name
                        - key
                    secret:
                      description: The secret with private CA.
                      type: object
                      properties:
                        namespace:
                          description: The secret namespace.
                          type: string
                        name:
                          description: The secret name.
                          type: string
                        key:
                          description: The secret key providing the Private CA cert.
                          type: string
                      required:
                        - namespace
                        - name
                        - key
                    url:
                      description: URL providing the plain text private CA cert.
                      type: string
                    type:
                      description: |
                        Method to find the private CA cert:
                        - none: No private CA cert needed
                        - configmap: Private CA cert is stored as a configmap
                        - secret: Private CA cert is stored as a secret
                        - url: Private CA cert comes from an external URL
                        - certmanager: Private CA cert is managed by cert-manager, please use
                          ingress.tls.ca accordingly
                      type: string
                      enum:
                        - none
                        - configmap
                        - secret
                        - url
                        - certmanager
                      default: none
                argocd:
                  description: Configuration for ArgoCD.
                  properties:
                    admin:
                      description: Configuration for the ArgoCD admin user.
                      properties:
                        # TO DO
                        enabled:
                          default: false
                          description: Specifies whether the ArgoCD admin user is enabled.
                          type: boolean
                        password:
                          description: The password for the ArgoCD admin user.
                          type: string
                      required:
                        - enabled
                      type: object
                    namespace:
                      description: The namespace for ArgoCD.
                      type: string
                    subDomain:
                      description: The subdomain for ArgoCD.
                      type: string
                    helmRepoUrl:
                      description: ArgoCD helm repository url.
                      type: string
                    chartVersion:
                      description: ArgoCD helm chart version (e.g., "4.7.13").
                      type: string
                    values:
                      description: |
                        You can add custom values for argocd, they will be merged with roles/argocd/templates/values/
                        https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd
                        https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    privateGitlabDomain:
                      description: Private Gitlab repository for argocd to access.
                      type: string
                  required:
                    - admin
                  type: object
                argocdInfra:
                  description: Configuration for Argo CD infrastructure instance that will be used to deploy everything else.
                  properties:
                    installEnabled:
                      default: false
                      description: Specifies whether we should install Argo CD infrastructure instance.
                      type: boolean
                    admin:
                      description: Configuration for the Argo CD infrastructure instance admin user.
                      properties:
                        enabled:
                          default: false
                          description: Specifies whether the Argo CD infrastructure instance admin user is enabled.
                          type: boolean
                        password:
                          description: The password for the Argo CD infrastructure instance admin user.
                          type: string
                      required:
                        - enabled
                      type: object
                    namespace:
                      description: The namespace for Argo CD infrastructure instance.
                      type: string
                    subDomain:
                      description: The subdomain for Argo CD infrastructure instance .
                      type: string
                    helmRepoUrl:
                      description: Argo CD community maintained helm repository url.
                      type: string
                    chartVersion:
                      description: Argo CD community maintained helm chart version (e.g., "7.3.11").
                      type: string
                    values:
                      description: |
                        You can add custom values for argocdInfra, they will be merged with roles/infra/argocd-infra/templates/values/
                        https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd
                        https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    privateGitlabDomain:
                      description: Private Gitlab repository for argocd to access.
                      type: string
                    vaultPluginVersion:
                      description: |
                        Argo CD Vault plugin version (e.g., "1.18.1").
                        See https://github.com/argoproj-labs/argocd-vault-plugin/releases
                      type: string
                  required:
                    - admin
                    - installEnabled
                  type: object
                certmanager:
                  description: Configuration for Cert Manager.
                  properties:
                    helmRepoUrl:
                      description: Cert-manager helm repository url.
                      type: string
                    chartVersion:
                      description: Cert-manager helm chart version (e.g., "v1.13.1").
                      type: string
                    forcedInstall:
                      description: |
                        If set to true, cert-manager will be installed (or reinstalled) in the
                        desired namespace regardless of its existing state.
                        The default value is false, which means no forced installation will occur.
                      default: false
                      type: boolean
                    values:
                      description: |
                        You can add custom values for cert-manager, they will be merged with roles/cert-manager/templates/values/
                        https://github.com/cloudnative-pg/charts/blob/main/charts/cloudnative-pg
                        https://github.com/cert-manager/cert-manager/blob/master/deploy/charts/cert-manager/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                cloudnativepg:
                  description: Configuration for CloudNativePG.
                  properties:
                    namespace:
                      description: The namespace for CloudNativePG.
                      type: string
                    helmRepoUrl:
                      description: CloudNativePG helm repository url.
                      type: string
                    chartVersion:
                      description: CloudNativePG helm chart version (e.g., "0.18.2").
                      type: string
                    forcedInstall:
                      description: |
                        If set to true, CNPG Operator will be installed (or reinstalled) in the
                        desired namespace regardless of its existing state.
                        The default value is false, which means no forced installation will occur.
                      default: false
                      type: boolean
                    values:
                      description: |
                        You can add custom values for CloudNativePG, they will be merged with roles/cloudnativepg/templates/values/
                        https://github.com/cloudnative-pg/charts/blob/main/charts/cloudnative-pg
                        https://github.com/cloudnative-pg/charts/blob/main/charts/cloudnative-pg/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                console:
                  description: Configuration for the console.
                  properties:
                    namespace:
                      description: The namespace for console.
                      type: string
                    release:
                      description: Console version (e.g., "4.1.0").
                      type: string
                    subDomain:
                      description: The subdomain for console.
                      type: string
                    helmRepoUrl:
                      description: Console helm repository url.
                      type: string
                    values:
                      description: Extra helm values for console.
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    postgresPvcSize:
                      description: Size for postgres data pvc.
                      type: string
                      default: 10Gi
                    postgresWalMaxSlotKeepSize:
                      description: |
                        Maximum size of WAL files that replication slots are allowed to retain in
                        the pg_wal directory at checkpoint time.
                        Default is -1, meaning that replication slots may retain an unlimited amount
                        of WAL files. You can for instance set it to "9GB".
                        https://cloudnative-pg.io/documentation/current/replication/#capping-the-wal-size-retained-for-replication-slots
                        Refer to postgresql.conf for memory units.
                      type: string
                    postgresWalPvcSize:
                      description: Size for postgres wal pvc (if value is not set then WAL files are stored within the data PVC).
                      type: string
                    cnpg:
                      description: Configuration for cnpg clusters.
                      type: object
                      properties:
                        mode:
                          description: Determines whether cnpg clusters should be deployed as a primary cluster
                            (initdb from scratch) or replica cluster (initdb from external source).
                          default: primary
                          type: string
                          enum:
                            - primary
                            - replica
                            - restore
                        imageName:
                          description: Name of the container image, supporting both tags (`<image>:<tag>`) and digests for deterministic and repeatable deployments (`<image>:<tag>@sha256:<digestValue>`). See. https://cloudnative-pg.io/documentation/1.24/operator_capability_levels/#override-of-operand-images-through-the-crd
                          type: string
                        exposed:
                          description: Whether or not the cnpg cluster should be exposed via NodePort.
                          type: boolean
                          default: false
                        nodePort:
                          description: NodePort used to expose the cnpg cluster instance.
                          type: string
                        connectionParameters:
                          description: |
                            Connection parameters used for replication, it should contain
                            'connectionParameters', 'sslKey', 'sslCert', 'sslRootCert'
                            https://cloudnative-pg.io/documentation/1.18/bootstrap/#bootstrap-from-a-live-cluster-pg_basebackup
                          type: string
                  type: object
                gitlab:
                  description: Configuration for GitLab.
                  properties:
                    namespace:
                      description: The namespace for GitLab.
                      type: string
                    subDomain:
                      description: The subdomain for GitLab.
                      type: string
                    chartVersion:
                      description: GitLab chart version (e.g., "6.11.10").
                      type: string
                    pvcGitalySize:
                      description: Size for Gitaly persistent volume.
                      type: string
                    values:
                      description: |
                        You can add custom values for gitlab, they will be merged with roles/gitlab/templates/values/
                        https://docs.gitlab.com/charts/charts/globals.html
                        https://gitlab.com/gitlab-org/charts/gitlab/-/blob/master/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    insecureCI:
                      description: |
                        If you use a private CA in exposed_ca, you should set it to true.
                        Configuring tools in pipelines container is not an easy job.
                      type: boolean
                    extraCIVars:
                      description: A key value object to inject additional variables into gitlab root group for
                        CI/CD pipelines.
                      type: array
                      default: []
                      items:
                        properties:
                          name:
                            description: Variable name of the Gitlab CI var.
                            type: string
                          value:
                            description: Value of the Gitlab CI var.
                            type: string
                          masked:
                            description: Should the Gitlab CI var be masked in logs.
                            type: boolean
                            default: true
                          protected:
                            description: Should the Gitlab CI var be protected.
                            type: boolean
                            default: false
                        type: object
                        required:
                          - name
                          - value
                    postgresPvcSize:
                      description: Size for postgres data pvc.
                      type: string
                      default: 10Gi
                    postgresWalMaxSlotKeepSize:
                      description: |
                        Maximum size of WAL files that replication slots are allowed to retain in
                        the pg_wal directory at checkpoint time.
                        Default is -1, meaning that replication slots may retain an unlimited amount
                        of WAL files. You can for instance set it to "9GB".
                        https://cloudnative-pg.io/documentation/current/replication/#capping-the-wal-size-retained-for-replication-slots
                        Refer to postgresql.conf for memory units.
                      type: string
                    postgresWalPvcSize:
                      description: Size for postgres wal pvc (if value is not set then WAL files are stored within the data PVC).
                      type: string
                    cnpg:
                      description: Configuration for cnpg clusters.
                      type: object
                      properties:
                        mode:
                          description: Determines whether cnpg clusters should be deployed as a primary cluster
                            (initdb from scratch) or replica cluster (initdb from external source).
                          default: primary
                          type: string
                          enum:
                            - primary
                            - replica
                            - restore
                        imageName:
                          description: Name of the container image, supporting both tags (`<image>:<tag>`) and digests for deterministic and repeatable deployments (`<image>:<tag>@sha256:<digestValue>`). See. https://cloudnative-pg.io/documentation/1.24/operator_capability_levels/#override-of-operand-images-through-the-crd
                          type: string
                        exposed:
                          description: Whether or not the cnpg cluster should be exposed via NodePort.
                          type: boolean
                          default: false
                        nodePort:
                          description: NodePort used to expose the cnpg cluster instance.
                          type: string
                        connectionParameters:
                          description: |
                            Connection parameters used for replication, it should contain
                            'connectionParameters', 'sslKey', 'sslCert', 'sslRootCert'
                            https://cloudnative-pg.io/documentation/1.18/bootstrap/#bootstrap-from-a-live-cluster-pg_basebackup
                          type: string
                  type: object
                gitlabCiPipelinesExporter:
                  description: Configuration for GitLab CI Pipelines Exporter.
                  properties:
                    helmRepoUrl:
                      description: GitLab CI Pipelines Exporter helm repository url.
                      type: string
                    chartVersion:
                      description: GitLab CI Pipelines Exporter chart version (e.g., "0.3.4").
                      type: string
                    values:
                      description: |
                        You can add custom values for gitLab-ci-pipelines-exporter, they will be
                        merged with roles/gitlab-ci-pipelines-exporter/templates/values/
                        https://github.com/mvisonneau/helm-charts/blob/main/charts/gitlab-ci-pipelines-exporter
                        https://github.com/mvisonneau/helm-charts/blob/main/charts/gitlab-ci-pipelines-exporter/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                gitlabOperator:
                  description: Configuration for GitLab Operator.
                  properties:
                    helmRepoUrl:
                      description: GitLab Operator helm repository url.
                      type: string
                    chartVersion:
                      description: GitLab Operator release version (e.g., "0.24.1").
                      type: string
                    namespace:
                      description: The namespace for GitLab Operator.
                      type: string
                    forcedInstall:
                      description: |
                        If set to true, GitLab Operator will be installed (or reinstalled) in the
                        desired namespace regardless of its existing state.
                        The default value is false, which means no forced installation will occur.
                      default: false
                      type: boolean
                    values:
                      description: |
                        You can add custom values for GitLab Operator, they will be merged with roles/gitlab-operator/templates/values/
                        https://docs.gitlab.com/operator/
                        https://gitlab.com/gitlab-org/cloud-native/gitlab-operator/-/blob/master/deploy/chart/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                gitlabCatalog:
                  description: Configuration for GitLab Catalog.
                  properties:
                    catalogRepoUrl:
                      description: GitLab Catalog repository url.
                      default: https://github.com/cloud-pi-native/gitlab-ci-catalog.git
                      type: string
                  type: object
                gitlabRunner:
                  description: Configuration for GitLab Runner.
                  properties:
                    helmRepoUrl:
                      description: GitLab Runner helm repository url.
                      type: string
                    chartVersion:
                      description: GitLab Runner chart version (e.g., "0.57.0").
                      type: string
                    resources:
                      description: Resources for GitLab Runner.
                      type: object
                      properties:
                        requests:
                          description: Resources requests for GitLab Runner.
                          type: object
                          properties:
                            cpu:
                              description: CPU request for GitLab Runner.
                              type: string
                            memory:
                              description: Memory request for GitLab Runner.
                              type: string
                        limits:
                          description: Resources limits for GitLab Runner.
                          type: object
                          properties:
                            cpu:
                              description: CPU limit for GitLab Runner.
                              type: string
                            memory:
                              description: Memory limit for GitLab Runner.
                              type: string
                        overwrite:
                          description: Resources overwrite for GitLab Runner.
                          type: object
                          properties:
                            requests:
                              description: Resources requests max overwrite for GitLab Runner.
                              type: object
                              properties:
                                cpu:
                                  description: CPU request max overwrite for GitLab Runner.
                                  type: string
                                memory:
                                  description: Memory request max overwrite for GitLab Runner.
                                  type: string
                            limits:
                              description: Resources limits max overwrite for GitLab Runner.
                              type: object
                              properties:
                                cpu:
                                  description: CPU limit max overwrite for GitLab Runner.
                                  type: string
                                memory:
                                  description: Memory limit max overwrite for GitLab Runner.
                                  type: string
                    values:
                      description: |
                        You can add custom values for GitLab Runner, they will be merged with roles/gitlab-runner/templates/values/
                        https://docs.gitlab.com/runner/
                        https://gitlab.com/gitlab-org/cloud-native/distroless/gitlab-runner
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                global:
                  description: Global configuration not specific to one service.
                  properties:
                    environment:
                      default: production
                      description: Defines DSO environment type, i.e. development or production.
                      type: string
                    projectsRootDir:
                      default:
                        - forge
                      description: |
                        Defines root directory for projects in Gitlab and Vault.
                        These values should NEVER be changed once a project is used !
                        Projects will not be migrated automatically.
                        Represented as array of strings (e.g., ['company', 'forge', 'projects'])
                        Cannot be an empty Array
                      items:
                        type: string
                      minItems: 1
                      type: array
                    rootDomain:
                      description: The top level of your domain. To expose Argo as "argo.example.com",
                        the value should be ".example.com" (notice the leading dot).
                      type: string
                      default: .example.com
                      pattern: "^\\..*$"
                    metrics:
                      description: Configuration for metrics feature.
                      properties:
                        enabled:
                          default: false
                          description: Specifies whether metrics should be enabled.
                          type: boolean
                        additionalLabels:
                          description: Adds additional labels if needed, when metrics are enabled.
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                      required:
                        - enabled
                      type: object
                    alerting:
                      description: Configuration for alerting feature.
                      properties:
                        enabled:
                          default: false
                          description: Specifies whether alerting should be enabled.
                          type: boolean
                      required:
                        - enabled
                      type: object
                    backup:
                      description: Configuration for backup feature.
                      properties:
                        s3:
                          description: S3 configuration to use for backups.
                          properties:
                            endpointURL:
                              description: Defines the s3 endpoint for vault backups.
                              type: string
                            bucketName:
                              description: Defines the globally shared s3 bucket name for backups.
                              type: string
                              default: ""
                            credentials:
                              properties:
                                name:
                                  description: Defines the s3 kubernetes secret name used for vault backups.
                                  type: string
                                accessKeyId:
                                  properties:
                                    key:
                                      description: Defines the s3 accessKeyId kubernetes secret key used for vault backups.
                                      type: string
                                    value:
                                      description: Defines the s3 accessKeyId value used for vault backups.
                                      type: string
                                  type: object
                                secretAccessKey:
                                  properties:
                                    key:
                                      description: Defines the s3 secretAccessKey kubernetes secret key used for vault backups.
                                      type: string
                                    value:
                                      description: Defines the s3 secretAccessKey value used for vault backups.
                                      type: string
                                  type: object
                              type: object
                            endpointCA:
                              properties:
                                namespace:
                                  description: Defines the namespace in which the secret containing cnpg backups' CA bundle
                                    is located. This secret will be copied into each namespace which uses cnpg.
                                  type: string
                                name:
                                  description: Defines the secret name containing s3 CA for cnpg backups.
                                  type: string
                                key:
                                  description: Defines the secret key containing s3 CA for cnpg backups.
                                  type: string
                              type: object
                          type: object
                        velero:
                          properties:
                            enabled:
                              description: Enable Velero backups.
                              default: false
                              type: boolean
                          type: object
                        vault:
                          properties:
                            enabled:
                              description: Enable s3 vault backups.
                              default: false
                              type: boolean
                            helmRepoUrl:
                              description: Vault backup-utils helm repository url.
                              type: string
                            chartVersion:
                              description: Vault backup-utils helm chart version (e.g., "1.12.2").
                              type: string
                            pathPrefix:
                              description: Defines the s3 destination path for vault backups.
                              type: string
                              default: "vault"
                            mcExtraArgs:
                              description: Extra args to pass to minio cli for the backups.
                              type: string
                            cron:
                              description: Defines the cron rule used for vault backups. By default it runs every 6 hours.
                              type: string
                              default: "0 */6 * * *"
                            retentionPolicy:
                              description: Defines retention policy for vault backups recurrences.
                              type: string
                              default: "30d"
                          type: object
                        vaultInfra:
                          properties:
                            enabled:
                              description: Enable s3 vault infra backups.
                              default: false
                              type: boolean
                            helmRepoUrl:
                              description: Vault infra backup-utils helm repository url.
                              type: string
                            chartVersion:
                              description: Vault infra backup-utils helm chart version (e.g., "1.12.2").
                              type: string
                            pathPrefix:
                              description: Defines the s3 destination path for vault infra backups.
                              type: string
                              default: "vault-infra"
                            mcExtraArgs:
                              description: Extra args to pass to minio cli for the backups.
                              type: string
                            cron:
                              description: Defines the cron rule used for vault infra backups. By default it runs every 6 hours.
                              type: string
                              default: "0 */6 * * *"
                            retentionPolicy:
                              description: Defines retention policy for vault infra backups recurrences.
                              type: string
                              default: "30d"
                          type: object
                        cnpg:
                          properties:
                            enabled:
                              description: Enable s3 cnpg backups.
                              default: false
                              type: boolean
                            pathPrefix:
                              description: Defines the globally shared s3 destination path for cnpg backups.
                              type: string
                              default: "cnpg"
                            cron:
                              description: Defines the cron rule used for cnpg backups. By default it runs every 6 hours.
                              type: string
                              default: "0 0 */6 * * *"
                            retentionPolicy:
                              description: Defines retention policy for cnpg backups recurrences.
                              type: string
                              default: "30d"
                            compression:
                              description: Defines which compression algorithm should be used for cnpg backups.
                              type: string
                              enum:
                                - none
                                - gzip
                                - bzip2
                                - snappy
                              default: "none"
                          type: object
                        gitlab:
                          properties:
                            enabled:
                              description: Enable s3 gitlab backups.
                              default: false
                              type: boolean
                            pathPrefix:
                              description: Defines the s3 destination path for gitlab backups.
                              type: string
                              default: "gitlab"
                            mcExtraArgs:
                              description: Extra args to pass to minio cli for the backups.
                              type: string
                            cron:
                              description: Defines the cron rule used for gitlab backups. By default it runs every 6 hours.
                              type: string
                              default: "0 */6 * * *"
                            retentionPolicy:
                              description: Defines retention policy for gitlab backups recurrences.
                              type: string
                              default: "30d"
                            extraArgs:
                              description: String of arguments to pass to the backup utility.
                              type: string
                          type: object
                      type: object
                    platform:
                      default: openshift
                      description: Cluster platform, either the Openshift family (Openshift, OKD), or the rest
                        (Kubernetes Vanilla, K3s, RKE2, EKS, GKE...).
                      enum:
                        - openshift
                        - kubernetes
                      type: string
                    offline:
                      default: false
                      description: Specifies whether the cluster have access to the internet or not.
                      type: boolean
                    registry:
                      description: Specifies the internal registry to use.
                      type: string
                    imagePullSecretsData:
                      description: Specifies the credentials to use for pulling image, encoded in base64.
                      type: string
                    profile:
                      description: Specifies security profile (e.g., cis).
                      type: string
                    gitOps:
                      properties:
                        watchpointEnabled:
                          default: true
                          description: |
                            Specifies whether we should interrupt GitOps installation to review some generated files.
                            Installation will be interrupted if true, displaying an explanation message.
                          type: boolean
                      type: object
                  required:
                    - projectsRootDir
                    - rootDomain
                    - environment
                    - metrics
                    - alerting
                    - platform
                    - offline
                    - gitOps
                  type: object
                grafana:
                  description: Configuration for Grafana instance.
                  properties:
                    namespace:
                      description: The namespace for Grafana instance.
                      type: string
                    subDomain:
                      description: The subdomain for Grafana instance.
                      type: string
                    grafanaPvcSize:
                      description: Size for grafana persistent volume.
                      type: string
                    imageVersion:
                      description: Grafana release version (e.g., "9.5.5").
                      type: string
                  type: object
                grafanaDatasource:
                  description: Configuration for Grafana default Datasource.
                  properties:
                    defaultPrometheusDatasourceUrl:
                      description: |
                        We provide a default Prometheus Datasource for convenience.
                        Use this parameter to set its URL.
                      type: string
                  type: object
                grafanaOperator:
                  description: Configuration for Grafana Operator.
                  properties:
                    ociChartUrl:
                      description: Grafana Operator OCI chart url.
                      type: string
                    chartVersion:
                      description: Grafana Operator release version (e.g., "v5.6.0").
                      type: string
                    namespace:
                      description: The namespace for Grafana Operator.
                      type: string
                    values:
                      description: |
                        You can add custom values for Grafana Operator,
                        they will be merged with roles/grafana-operator/templates/values/
                        https://grafana.github.io/grafana-operator/docs/installation/helm/#values
                        https://github.com/grafana/grafana-operator/tree/master/deploy/helm/grafana-operator
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                harbor:
                  description: Configuration for Harbor.
                  properties:
                    adminPassword:
                      description: Administrator password for Harbor.
                      type: string
                    namespace:
                      description: The namespace for Harbor.
                      type: string
                    subDomain:
                      description: The subdomain for Harbor.
                      type: string
                    helmRepoUrl:
                      description: Harbor helm repository url.
                      type: string
                    chartVersion:
                      description: Harbor helm chart version (e.g., "1.12.2").
                      type: string
                    pvcRegistrySize:
                      description: Size for registry persistent volume.
                      type: string
                    pvcJobLogSize:
                      description: Size for jobLog persistent volume.
                      type: string
                    pvcDatabaseSize:
                      description: Size for database persistent volume.
                      type: string
                    pvcRedisSize:
                      description: Size for redis persistent volume.
                      type: string
                    pvcTrivySize:
                      description: Size for trivy persistent volume.
                      type: string
                    proxyCache:
                      description: Array of proxy cache configurations.
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            description: Name of project and registry.
                            type: string
                          registry:
                            description: Registry configuration.
                            type: object
                            properties:
                              provider:
                                description: Specifies the registry provider. Default is docker-hub.
                                type: string
                                default: docker-hub
                              endpointUrl:
                                description: URL of the registry endpoint.
                                type: string
                                default: ""
                              insecure:
                                description: Allows insecure connections. Default is false.
                                default: false
                                type: boolean
                              credential:
                                type: object
                                properties:
                                  accessKey:
                                    type: string
                                    default: ""
                                  accessSecret:
                                    type: string
                                    default: ""
                                  type:
                                    type: string
                                    default: "basic"
                            required:
                              - provider
                        required:
                          - name
                          - registry
                    values:
                      description: |
                        You can add custom values for harbor, they will be merged with roles/harbor/templates/values/
                        https://github.com/goharbor/harbor-helm
                        https://github.com/goharbor/harbor-helm/blob/main/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    postgresPvcSize:
                      description: Size for postgres data pvc.
                      type: string
                      default: 10Gi
                    postgresWalMaxSlotKeepSize:
                      description: |
                        Maximum size of WAL files that replication slots are allowed to retain in
                        the pg_wal directory at checkpoint time.
                        Default is -1, meaning that replication slots may retain an unlimited amount
                        of WAL files. You can for instance set it to "9GB".
                        https://cloudnative-pg.io/documentation/current/replication/#capping-the-wal-size-retained-for-replication-slots
                        Refer to postgresql.conf for memory units.
                      type: string
                    postgresWalPvcSize:
                      description: Size for postgres wal pvc (if value is not set then WAL files are stored within the data PVC).
                      type: string
                    cnpg:
                      description: Configuration for cnpg clusters.
                      type: object
                      properties:
                        mode:
                          description: Determines whether cnpg clusters should be deployed as a primary cluster
                            (initdb from scratch) or replica cluster (initdb from external source).
                          default: primary
                          type: string
                          enum:
                            - primary
                            - replica
                            - restore
                        imageName:
                          description: Name of the container image, supporting both tags (`<image>:<tag>`) and digests for deterministic and repeatable deployments (`<image>:<tag>@sha256:<digestValue>`). See. https://cloudnative-pg.io/documentation/1.24/operator_capability_levels/#override-of-operand-images-through-the-crd
                          type: string
                        exposed:
                          description: Whether or not the cnpg cluster should be exposed via NodePort.
                          type: boolean
                          default: false
                        nodePort:
                          description: NodePort used to expose the cnpg cluster instance.
                          type: string
                        connectionParameters:
                          description: |
                            Connection parameters used for replication, it should contain
                            'connectionParameters', 'sslKey', 'sslCert', 'sslRootCert'
                            https://cloudnative-pg.io/documentation/1.18/bootstrap/#bootstrap-from-a-live-cluster-pg_basebackup
                          type: string
                  required:
                    - adminPassword
                    - pvcRegistrySize
                  type: object
                ingress:
                  description: General configuration for ingress.
                  properties:
                    annotations:
                      x-kubernetes-preserve-unknown-fields: true
                      default: {}
                      description: Additional annotations to add to all tools' ingresses.
                      type: object
                    className:
                      description: Ingress class name to use for all ingresses.
                      type: string
                    labels:
                      x-kubernetes-preserve-unknown-fields: true
                      default: {}
                      description: Additional labels to add to all tools' ingresses.
                      type: object
                    tls:
                      description: TLS configuration for ingresses.
                      properties:
                        acme:
                          description: acme/Let'sEncrypt configuration, only http challenge.
                          properties:
                            email:
                              description: User email used for ACME.
                              type: string
                            environment:
                              description: |
                                Let's Encrypt environment to use for issuing certificates:
                                - production : Use this value for production ready certificates.
                                  Beware of rate limits. See: https://letsencrypt.org/docs/rate-limits/
                                - staging : Use this value for testing purposes. It has significantly higher
                                  rate limits. Beware of root certificates.
                                  See: https://letsencrypt.org/docs/staging-environment/
                              enum:
                                - production
                                - staging
                              type: string
                              default: production
                          required:
                            - email
                            - environment
                          type: object
                        ca:
                          description: CA configuration, need a valid CA key/cert in cert-manager namespace.
                          properties:
                            secretName:
                              description: The TLS secret name available in cert-manager namespace.
                              type: string
                          required:
                            - secretName
                          type: object
                        tlsSecret:
                          description: Define the TLS secret name to use in ingress.
                          properties:
                            method:
                              description: |
                                How to retrieve the secret names:
                                - in-namespace: you are in charge of secret replication in tools' namespaces
                              enum:
                                - in-namespace
                              type: string
                              default: in-namespace
                            name:
                              description: TLS secret name.
                              type: string
                          required:
                            - name
                            - method
                          type: object
                        type:
                          default: none
                          description: |
                            - none: no TLS (seems like a bad idea, unstable deployment).
                            - acme: TLS with HTTP ACME challenge ->
                              https://cert-manager.io/docs/configuration/acme/http01/
                            - ca: TLS with custom CA -> https://cert-manager.io/docs/configuration/ca/
                            - tlsSecret: TLS with a custom TLS secret name specified in
                              `ingress.spec.tls.secretName`, should be wildcard or include all hosts ->
                              https://kubernetes.io/docs/concepts/configuration/secret/#tls-secrets
                          enum:
                            - none
                            - acme
                            - ca
                            - tlsSecret
                          type: string
                      required:
                        - type
                      type: object
                  type: object
                keycloak:
                  description: Configuration for Keycloak.
                  properties:
                    namespace:
                      description: The namespace for Keycloak.
                      type: string
                    subDomain:
                      description: The subdomain for Keycloak.
                      type: string
                    helmRepoUrl:
                      description: Keycloak Bitnami helm repository url.
                      type: string
                    chartVersion:
                      description: Keycloak Bitnami chart version (e.g., "16.0.3").
                      type: string
                    postgresPvcSize:
                      description: Size for postgres data pvc.
                      type: string
                      default: 10Gi
                    postgresWalMaxSlotKeepSize:
                      description: |
                        Maximum size of WAL files that replication slots are allowed to retain in
                        the pg_wal directory at checkpoint time.
                        Default is -1, meaning that replication slots may retain an unlimited amount
                        of WAL files. You can for instance set it to "9GB".
                        https://cloudnative-pg.io/documentation/current/replication/#capping-the-wal-size-retained-for-replication-slots
                        Refer to postgresql.conf for memory units.
                      type: string
                    postgresWalPvcSize:
                      description: Size for postgres wal pvc (if value is not set then WAL files are stored within the data PVC).
                      type: string
                    pluginDownloadUrl:
                      description: Plugins download Url.
                      type: string
                    values:
                      description: |
                        You can add custom values for keycloak, they will be merged with roles/keycloak/templates/values/
                        https://github.com/bitnami/charts/tree/main/bitnami/keycloak
                        https://github.com/bitnami/charts/blob/main/bitnami/keycloak/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    cnpg:
                      description: Configuration for cnpg clusters.
                      type: object
                      properties:
                        mode:
                          description: Determines whether cnpg clusters should be deployed as a primary cluster
                            (initdb from scratch) or replica cluster (initdb from external source).
                          default: primary
                          type: string
                          enum:
                            - primary
                            - replica
                            - restore
                        imageName:
                          description: Name of the container image, supporting both tags (`<image>:<tag>`) and digests for deterministic and repeatable deployments (`<image>:<tag>@sha256:<digestValue>`). See. https://cloudnative-pg.io/documentation/1.24/operator_capability_levels/#override-of-operand-images-through-the-crd
                          type: string
                        exposed:
                          description: Whether or not the cnpg cluster should be exposed via NodePort.
                          type: boolean
                          default: false
                        nodePort:
                          description: NodePort used to expose the cnpg cluster instance.
                          type: string
                        connectionParameters:
                          description: |
                            Connection parameters used for replication, it should contain
                            'connectionParameters', 'sslKey', 'sslCert', 'sslRootCert'
                            https://cloudnative-pg.io/documentation/1.18/bootstrap/#bootstrap-from-a-live-cluster-pg_basebackup
                          type: string
                  type: object
                keycloakInfra:
                  description: Configuration for Keycloak infrastructure instance.
                  properties:
                    installEnabled:
                      default: false
                      description: Specifies whether we should install Keycloak infrastructure instance.
                      type: boolean
                    namespace:
                      description: The namespace for Keycloak infrastructure instance.
                      type: string
                    subDomain:
                      description: The subdomain for Keycloak infrastructure instance.
                      type: string
                    helmRepoUrl:
                      description: Keycloak Bitnami helm repository url.
                      type: string
                    chartVersion:
                      description: Keycloak Bitnami chart version (e.g., "19.3.4").
                      type: string
                    postgresPvcSize:
                      description: Size for postgres data pvc.
                      type: string
                      default: 10Gi
                    postgresWalMaxSlotKeepSize:
                      description: |
                        Maximum size of WAL files that replication slots are allowed to retain in
                        the pg_wal directory at checkpoint time.
                        Default is -1, meaning that replication slots may retain an unlimited amount
                        of WAL files. You can for instance set it to "9GB".
                        https://cloudnative-pg.io/documentation/current/replication/#capping-the-wal-size-retained-for-replication-slots
                        Refer to postgresql.conf for memory units.
                      type: string
                    postgresWalPvcSize:
                      description: Size for postgres wal pvc (if value is not set then WAL files are stored within the data PVC).
                      type: string
                    pluginDownloadUrl:
                      description: Plugins download Url.
                      type: string
                    values:
                      description: |
                        You can add custom values for keycloakInfra, they will be merged with roles/infra/keycloak-infra/templates/values/
                        https://github.com/bitnami/charts/tree/main/bitnami/keycloak
                        https://github.com/bitnami/charts/blob/main/bitnami/keycloak/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    cnpg:
                      description: Configuration for cnpg clusters.
                      type: object
                      properties:
                        mode:
                          description: Determines whether cnpg clusters should be deployed as a primary cluster
                            (initdb from scratch) or replica cluster (initdb from external source).
                          default: primary
                          type: string
                          enum:
                            - primary
                            - replica
                            - restore
                        exposed:
                          description: Whether or not the cnpg cluster should be exposed via NodePort.
                          type: boolean
                          default: false
                        nodePort:
                          description: NodePort used to expose the cnpg cluster instance.
                          type: string
                        connectionParameters:
                          description: |
                            Connection parameters used for replication, it should contain
                            'connectionParameters', 'sslKey', 'sslCert', 'sslRootCert'
                            https://cloudnative-pg.io/documentation/1.18/bootstrap/#bootstrap-from-a-live-cluster-pg_basebackup
                          type: string
                  required:
                    - installEnabled
                  type: object
                kyverno:
                  description: Configuration for Kyverno.
                  properties:
                    namespace:
                      description: The namespace for Kyverno.
                      type: string
                    forcedInstall:
                      description: |
                        If set to true, Kyverno will be installed (or reinstalled) in the
                        desired namespace regardless of its existing state.
                        The default value is false, which means no forced installation will occur.
                      default: false
                      type: boolean
                    helmRepoUrl:
                      description: Kyverno helm repository url.
                      type: string
                    chartVersion:
                      description: Kyverno helm chart version (e.g., "3.1.4").
                      type: string
                    values:
                      description: |
                        You can add custom values for Kyverno, they will be merged with roles/kyverno/templates/values/
                        https://github.com/kyverno/kyverno/blob/main/charts/kyverno
                        https://github.com/kyverno/kyverno/blob/main/charts/kyverno/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                nexus:
                  description: Configuration for Nexus.
                  properties:
                    namespace:
                      description: The namespace for Nexus.
                      type: string
                    subDomain:
                      description: The subdomain for Nexus.
                      type: string
                    storageSize:
                      description: Size for nexus persistent volume.
                      type: string
                    proxyEnabled:
                      description: Whether or not to enable the nexus docker proxy cache.
                      type: boolean
                    proxyCacheSize:
                      description: Size for nexus proxy cache persistent volume.
                      type: string
                    imageTag:
                      description: Nexus version based on image tag (e.g., "3.56.0").
                      type: string
                    ingressAnnotations:
                      description: Custom annotations for nexus ingress, they will be pushed into the nexus
                        ingress rule combined to `dsc.ingress.annotations`.
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                prometheus:
                  description: Minimal configuration for prometheus CRDs.
                  properties:
                    crd:
                      properties:
                        type:
                          type: string
                          enum:
                            - external
                            - managed
                          default: external
                        version:
                          type: string
                      type: object
                  type: object
                proxy:
                  description: Proxy configuration for tools.
                  properties:
                    enabled:
                      default: false
                      description: Enable or disable proxy on tools.
                      type: boolean
                    host:
                      description: Distant proxy ip/hostname.
                      type: string
                    http_proxy:
                      description: URL for http traffic. Format http://<host>:<port>/
                      type: string
                    https_proxy:
                      description: URL for https traffic. Format http://<host>:<port>/
                      type: string
                    no_proxy:
                      default: .cluster.local,.svc,10.0.0.0/8,127.0.0.1,192.168.0.0/16,localhost,svc.cluster.local,localdomain
                      description: |
                        Networks destination excluded by the proxy. Not so easy to configure.
                        Default is .cluster.local,.svc,10.0.0.0/8,127.0.0.1,192.168.0.0/16,localhost,svc.cluster.local,localdomain
                      type: string
                    port:
                      description: Distant proxy port listening.
                      type: string
                  required:
                    - enabled
                  type: object
                sonarqube:
                  description: Configuration for SonarQube.
                  properties:
                    namespace:
                      description: The namespace for SonarQube.
                      type: string
                    subDomain:
                      description: The subdomain for SonarQube.
                      type: string
                    helmRepoUrl:
                      description: SonarQube helm repository url.
                      type: string
                    chartVersion:
                      description: SonarQube helm chart version (e.g., "10.2.1+800").
                      type: string
                    postgresPvcSize:
                      description: Size for postgres data pvc.
                      type: string
                      default: 10Gi
                    postgresWalMaxSlotKeepSize:
                      description: |
                        Maximum size of WAL files that replication slots are allowed to retain in
                        the pg_wal directory at checkpoint time.
                        Default is -1, meaning that replication slots may retain an unlimited amount
                        of WAL files. You can for instance set it to "9GB".
                        https://cloudnative-pg.io/documentation/current/replication/#capping-the-wal-size-retained-for-replication-slots
                        Refer to postgresql.conf for memory units.
                      type: string
                    postgresWalPvcSize:
                      description: Size for postgres wal pvc (if value is not set then WAL files are stored within the data PVC).
                      type: string
                    pluginDownloadUrl:
                      description: Plugins download Url.
                      type: string
                    prometheusJavaagentVersion:
                      description: Prometheus javaagent version.
                      type: string
                    values:
                      description: |
                        You can add custom values for sonarqube, they will be merged with roles/sonarqube/templates/values/
                        https://github.com/SonarSource/helm-chart-sonarqube/tree/master/charts/sonarqube
                        https://github.com/SonarSource/helm-chart-sonarqube/blob/master/charts/sonarqube/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    cnpg:
                      description: Configuration for cnpg clusters.
                      type: object
                      properties:
                        mode:
                          description: Determines whether cnpg clusters should be deployed as a primary cluster
                            (initdb from scratch) or replica cluster (initdb from external source).
                          default: primary
                          type: string
                          enum:
                            - primary
                            - replica
                            - restore
                        imageName:
                          description: Name of the container image, supporting both tags (`<image>:<tag>`) and digests for deterministic and repeatable deployments (`<image>:<tag>@sha256:<digestValue>`). See. https://cloudnative-pg.io/documentation/1.24/operator_capability_levels/#override-of-operand-images-through-the-crd
                          type: string
                        exposed:
                          description: Whether or not the cnpg cluster should be exposed via NodePort.
                          type: boolean
                          default: false
                        nodePort:
                          description: NodePort used to expose the cnpg cluster instance.
                          type: string
                        connectionParameters:
                          description: |
                            Connection parameters used for replication, it should contain
                            'connectionParameters', 'sslKey', 'sslCert', 'sslRootCert'
                            https://cloudnative-pg.io/documentation/1.18/bootstrap/#bootstrap-from-a-live-cluster-pg_basebackup
                          type: string
                  type: object
                vault:
                  description: Configuration for Vault.
                  properties:
                    namespace:
                      description: The namespace for Vault.
                      type: string
                    subDomain:
                      description: The subdomain for Vault.
                      type: string
                    helmRepoUrl:
                      description: Hashicorp Vault helm repository url.
                      type: string
                    chartVersion:
                      description: Hashicorp Vault helm chart version (e.g., "0.25.0").
                      type: string
                    pvcSize:
                      description: Size for Vault persistent volume.
                      type: string
                    values:
                      description: |
                        You can add custom values for vault, they will be merged with roles/vault/templates/values/
                        https://developer.hashicorp.com/vault/docs/platform/k8s/helm
                        https://github.com/hashicorp/vault-helm/blob/main/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                vaultInfra:
                  description: Configuration for Vault infrastructure instance.
                  properties:
                    installEnabled:
                      default: false
                      description: Specifies whether we should install Vault infrastructure instance.
                      type: boolean
                    namespace:
                      description: The namespace for Vault infrastructure instance.
                      type: string
                    subDomain:
                      description: The subdomain for Vault infrastructure instance.
                      type: string
                    helmRepoUrl:
                      description: Hashicorp Vault helm repository url.
                      type: string
                    chartVersion:
                      description: Hashicorp Vault helm chart version (e.g., "0.25.0").
                      type: string
                    pvcSize:
                      description: Size for Vault infrastructure instance persistent volume.
                      type: string
                    values:
                      description: |
                        You can add custom values for vaultInfra, they will be merged with roles/infra/vault-infra/templates/values/
                        https://developer.hashicorp.com/vault/docs/platform/k8s/helm
                        https://github.com/hashicorp/vault-helm/blob/main/values.yaml
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
              required:
                - additionalsCA
                - argocd
                - argocdInfra
                - certmanager
                - cloudnativepg
                - console
                - exposedCA
                - gitlab
                - gitlabCiPipelinesExporter
                - gitlabOperator
                - gitlabRunner
                - global
                - grafana
                - grafanaDatasource
                - grafanaOperator
                - harbor
                - ingress
                - keycloak
                - keycloakInfra
                - kyverno
                - nexus
                - proxy
                - sonarqube
                - vault
                - vaultInfra
              type: object
          required:
            - spec
            - metadata
          type: object
      served: true
      storage: true
