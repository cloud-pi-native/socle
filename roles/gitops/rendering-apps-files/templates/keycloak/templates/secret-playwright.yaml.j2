{% if dsc.global.playwright.enabled %}
apiVersion: v1
kind: Secret
metadata:
  name: playwright-secret
  annotations:
    avp.kubernetes.io/remove-missing: "true"
type: Opaque
stringData:
  KEYCLOAK_DOMAIN: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#domain| jsonPath {.keycloak}>
  KEYCLOAK_REDIRECT_URI: https://<path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#domain| jsonPath {.console}>
  KEYCLOAK_PROTOCOL: https
  KEYCLOAK_ADMIN_USERNAME: dsoadmin
  KEYCLOAK_ADMIN_PASSWORD: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/keycloak/values#auth| jsonPath {.adminPassword}>
  KEYCLOAK_REALM: {{ dsc.keycloak.applicationRealm }}
  KEYCLOAK_CLIENT_FRONTEND: console-frontend
  KEYCLOAK_CLIENT_BACKEND: console-backend
{% if dsc.proxy.enabled %}
  HTTP_PROXY: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#proxy | jsonPath {.httpProxy}>
  HTTPS_PROXY: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#proxy | jsonPath {.httpsProxy}>
  NO_PROXY: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#proxy | jsonPath {.noProxy}>
{% endif %}
  MATTERMOST_URL: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#playwright | jsonPath {.mattermost.url}>
  MATTERMOST_CHANNEL_ID: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#playwright | jsonPath {.mattermost.channelId}>
  MATTERMOST_TOKEN: <path:{{ vaultinfra_kv_name }}/data/env/{{ dsc_name }}/apps/global/values#playwright | jsonPath {.mattermost.botToken}>
  PLAYWRIGHT_TEST: playwright/e2e-tests/keycloak.spec.ts
{% endif %}
