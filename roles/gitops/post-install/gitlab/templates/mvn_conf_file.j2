<settings>
  <servers>
    <server>
      <id>mirror-dso</id>
      <username>$${env.NEXUS_USERNAME}</username>
      <password>$${env.NEXUS_PASSWORD}</password>
    </server>
    <server>
      <id>nexus</id>
      <username>$${env.NEXUS_USERNAME}</username>
      <password>$${env.NEXUS_PASSWORD}</password>
    </server>
  </servers>
  <mirrors>
    <mirror>
      <id>mirror-dso</id>
      <name>mirror-dso</name>
      <url>http://nexus.{{ dsc.nexus.namespace }}.svc.cluster.local:8081/repository/$${env.PROJECT_PATH}-repository-group/</url>
      <mirrorOf>*</mirrorOf>
    </mirror>
    <mirror>
      <id>nexus</id>
      <name>nexus</name>
      <url>http://nexus.{{ dsc.nexus.namespace }}.svc.cluster.local:8081/repository/maven-public/</url>
      <mirrorOf>*</mirrorOf>
    </mirror>
    <mirror>
      <id>mirror-dso</id>
      <name>mirror-dso</name>
      <url>http://nexus.{{ dsc.nexus.namespace }}.svc.cluster.local:8081/repository/public/</url>
      <mirrorOf>*</mirrorOf>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>generic-user</id>
      <repositories>
        <repository>
          <id>nexus</id>
          <url>http://nexus.{{ dsc.nexus.namespace }}.svc.cluster.local:8081/repository/$${env.PROJECT_PATH}-repository-group/</url>
          <releases>
            <enabled>true</enabled>
          </releases>
          <snapshots>
            <enabled>true</enabled>
          </snapshots>
        </repository>
      </repositories>
    </profile>
  </profiles>
{% if dsc.proxy.enabled %}
  <proxies>
    <proxy>
      <id>default</id>
      <active>true</active>
      <host>{{ dsc.proxy.host }}</host>
      <port>{{ dsc.proxy.port }}</port>
      <nonProxyHosts>*.svc.cluster.local|localhost|127.0.0.1</nonProxyHosts>
    </proxy>
  </proxies>
{% endif %}
  <activeProfiles>
    <activeProfile>generic-user</activeProfile>
  </activeProfiles>
</settings>
